CREATE database railway;
USE railway;

CREATE TABLE TRAINLIST (
  TRAIN_NO VARCHAR(55) PRIMARY KEY,
  TRAIN_NAME VARCHAR(150),
  SOURCE VARCHAR(145),
  DESTINATION VARCHAR(145),
  AC_TICKET VARCHAR(45),
  GENERAL_TICKET VARCHAR(45) );



CREATE TABLE TRAIN_STATUS(
TRAIN_NO VARCHAR(45),
TRAIN_DATE datetime,
TOTAL_NO_AC_SEATS INT,
TOTAL_NO_GENRAL_SEATS INT,
NO_OF_AC_SEATS_BOOKED INT,
NO_OF_GENRAL_SEATS_BOOKED INT,
FOREIGN KEY(TRAIN_NO) REFERENCES TRAINLIST(TRAIN_NO));



CREATE TABLE BOOKING(
TRAIN_NO VARCHAR(50),
TICKET_NO VARCHAR(50) unique KEY,
TRAIN_DATE datetime,
TICKET_CATEGORY VARCHAR(50),
TOTAL_AC_SEATS INT,
AC_SEATS_BOOKED INT,
TOTAL_GENRAL_SEATS INT,
AC_GENRAL_BOOKED INT,
BOOKING_STATUS VARCHAR(50),
FOREIGN KEY(TRAIN_NO) REFERENCES TRAINLIST(TRAIN_NO));


CREATE TABLE PASSANGER(
TICKET_NO VARCHAR(50) ,
TRAIN_NO VARCHAR(45),
DATE_OF_TICKET_BOOKED DATETIME,
NAME VARCHAR(45),
GENDER VARCHAR(10),
AGE INT,
PASSENGER_ADDRESS VARCHAR(150),
STATUS_OF_RESERVATION VARCHAR(50),
CATEGORY_FOR_TICKET_BOOKED VARCHAR(50),
FOREIGN KEY(TRAIN_NO) REFERENCES TRAINLIST(TRAIN_NO),
FOREIGN KEY(TICKET_NO) REFERENCES BOOKING(TICKET_NO));



CREATE TABLE CANCEL(
TICKET_NO VARCHAR(50),
TRAIN_NO VARCHAR(45),
TRAIN_NAME VARCHAR(45),
CANCEL_STATUS VARCHAR(50),
FOREIGN KEY(TRAIN_NO) REFERENCES TRAINLIST(TRAIN_NO),
FOREIGN KEY(TICKET_NO) REFERENCES BOOKING(TICKET_NO));

SHOW TABLES;